{% extends "chatbox_app/base.html" %}

{% block title %}Sessions - Chatbox IA{% endblock %}

{% block content %}
<section class="page-header text-center text-md-start">
    <div class="row align-items-center g-4">
        <div class="col-md-7">
            <div class="hero-heading">
                <span class="badge rounded-pill bg-primary-subtle text-primary mb-3">
                    <i class="fa-solid fa-wand-magic-sparkles me-2"></i>Votre assistant propulsé par l'IA
                </span>
                <h1 class="display-5 fw-semibold text-white mb-3">Collaborez, partagez et générez des vidéos en toute simplicité.</h1>
                <p class="lead text-white-50 mb-4">Centralisez vos conversations, échangez des ressources multimédias et lancez des créations vidéo IA sans quitter votre espace de travail.</p>
                <a class="btn btn-lg btn-primary shadow-lg" href="#new-session"><i class="fa-solid fa-plus me-2"></i>Créer une session</a>
            </div>
        </div>
        <div class="col-md-5">
            <div class="stats-grid">
                <div class="glass-card text-center p-4">
                    <i class="fa-solid fa-comments fa-2x text-primary mb-3"></i>
                    <h3 class="h2 mb-1">{{ sessions|length }}</h3>
                    <p class="text-white-50 mb-0">Sessions actives</p>
                </div>
                <div class="glass-card text-center p-4">
                    <i class="fa-solid fa-film fa-2x text-info mb-3"></i>
                    <h3 class="h2 mb-1">IA Vidéo</h3>
                    <p class="text-white-50 mb-0">Automatisez vos rendus</p>
                </div>
                <div class="glass-card text-center p-4">
                    <i class="fa-solid fa-shield-halved fa-2x text-success mb-3"></i>
                    <h3 class="h2 mb-1">Sécurisé</h3>
                    <p class="text-white-50 mb-0">Partages protégés</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="row g-4 align-items-start">
    <div class="col-lg-7">
        <div class="glass-card h-100">
            <div class="card-body py-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div>
                        <h2 class="h4 text-white mb-1">Sessions récentes</h2>
                        <p class="text-white-50 mb-0">Reprenez la discussion là où vous l'avez laissée.</p>
                    </div>
                    <span class="badge bg-primary">Live</span>
                </div>
                <div class="list-group list-group-flush">
                    {% for session in sessions %}
                        <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" href="{% url 'chatbox_app:chat_session' session.pk %}">
                            <div>
                                <h3 class="h6 mb-1">{{ session.name|default:"Session sans titre" }}</h3>
                                <small class="text-muted">Ouverte le {{ session.created_at|date:"d F Y à H\hi" }}</small>
                            </div>
                            <i class="fa-solid fa-arrow-up-right-from-square text-primary"></i>
                        </a>
                    {% empty %}
                        <div class="empty-state text-center py-5">
                            <i class="fa-regular fa-folder-open fa-3x mb-3 text-white-25"></i>
                            <p class="text-white-50 mb-0">Aucune session pour le moment. Créez-en une nouvelle pour démarrer.</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-5" id="new-session">
        <div class="glass-card accent-card h-100">
            <div class="card-body py-4">
                <h2 class="h4 text-white mb-3"><i class="fa-solid fa-stars me-2"></i>Créer une nouvelle session</h2>
                <p class="text-white-50">Regroupez vos échanges, envoyez des fichiers et donnez vie à vos idées en quelques clics.</p>
                <form method="post" class="mt-4">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="name" class="form-label">Nom de la session</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Ex: Lancement produit" required>
                    </div>
                    <button type="submit" class="btn btn-gradient w-100">Créer la session</button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}
